@model OnlineShoping.Models.SubCategoryModel
@using OnlineShoping.Models;
@{
    CategoryModel m = new CategoryModel();
    var list = m.CategoryShow();
}

<form method="post" id="frm1" enctype="multipart/form-data">
    @Html.HiddenFor(a => a.SubCategoryId)
    <div class="mb-3">
        <label class="form-label">Category Name</label>
        @Html.DropDownListFor(a => a.CatogaryId, new SelectList(list, "CatogaryId", "Name"), "Select category", new { @class = "form-control" })

    </div>
   <div class="mb-3">
    <label class="form-label">SubCategory Name</label>
    @Html.TextBoxFor(a => a.SubCategoryName, new { @class = "form-control" })
    </div>

    <div class="mb-3">
        <label class="form-label">Status</label>
        @Html.DropDownListFor(a => a.Status, new List<SelectListItem>
{
               new SelectListItem{Text="Active" , Value="1"},
               new SelectListItem{Text="In-Active" , Value="0"} }, "Category Status", new { @class = "form-control" })

    </div>
    <div class="mb-3">
        <label class="form-label">Image</label>
        @Html.TextBoxFor(a => a.SubImagefile, new { @class = "form-control", type = "file" })
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary" id="addEditConfirmButton">Add</button>
    </div>
</form>
<script> 
    $(document).ready(function (){
        Save();
        TableShow();
    })
    function Save() {     
        debugger;
        $('#frm1').submit(function (event) {
            event.preventDefault();
            var formdata = new FormData(document.getElementById('frm1'));
            $.ajax
                ({
                    type: 'Post',
                    url: '/SubCategory/SubCategorysave',
                    processData: false,
                    contentType: false,
                    data: formdata,
                    success: function (result) {
                        if (result != null) {
                            toastr.success("Data has been successfully Saved");
                            TableShow();
                        }
                    }
                })
        })
    }
    function TableShow() {
        $.ajax
            ({
                type: 'Get',
                url: '/SubCategory/SubCategoryShow',
                success: function (res) {
                    $('#Tableshow').html(res)
                }
            })
    }
    function Delete(Id) {

        $.ajax
            ({
                type: 'Post',
                url: '/SubCategory/Delete',
                data: {
                    Id: Id
                },
                success: function (res) {
                    alert("Do you want to delete this data permently");
                    toastr.error("Data has been Successfully Deleted");

                    TableShow();
                }

            })
    }
</script>
